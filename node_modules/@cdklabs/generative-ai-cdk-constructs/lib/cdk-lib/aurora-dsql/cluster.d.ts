/**
 *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 *
 *  Licensed under the Apache License, Version 2.0 (the "License"). You may not use this file except in compliance
 *  with the License. A copy of the License is located at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  or in the 'license' file accompanying this file. This file is distributed on an 'AS IS' BASIS, WITHOUT WARRANTIES
 *  OR CONDITIONS OF ANY KIND, express or implied. See the License for the specific language governing permissions
 *  and limitations under the License.
 */
import { IResource, Resource, RemovalPolicy } from 'aws-cdk-lib';
import * as iam from 'aws-cdk-lib/aws-iam';
import * as kms from 'aws-cdk-lib/aws-kms';
import { IKey } from 'aws-cdk-lib/aws-kms';
import { Construct } from 'constructs';
/******************************************************************************
 *                                Interface
 *****************************************************************************/
/**
 * Interface for Aurora DSQL cluster resources
 */
export interface ICluster extends IResource {
    /**
     * The ARN of the cluster
     * @attribute
     */
    readonly clusterArn: string;
    /**
     * The timestamp when the cluster was created, in ISO 8601 format.
     * @attribute
     */
    readonly creationTime?: string;
    /**
     * The id of the cluster.
     * @attribute
     */
    readonly clusterId: string;
    /**
     * The status of the cluster.
     * @attribute
     */
    readonly status?: string;
    readonly vpcEndpointServiceName: string;
    /**
     * Optional KMS encryption key associated with this bucket.
     */
    readonly encryptionKey?: kms.IKey;
    /**
     * Grants IAM actions to the IAM Principal
     */
    grant(grantee: iam.IGrantable, ...actions: string[]): iam.Grant;
    /**
     * grants connection authorization for a custom database role to the IAM Principal
     */
    grantConnect(grantee: iam.IGrantable): iam.Grant;
    /**
     * Grants connection authorization for the admin role to the IAM Principal
     */
    grantConnectAdmin(grantee: iam.IGrantable): iam.Grant;
}
/******************************************************************************
 *                        ABSTRACT BASE CLASS
 *****************************************************************************/
/**
 * Abstract base class for a Aurora DSQL cluster.
 * Contains methods and attributes valid for Aurora DSQL clusters either created with CDK or imported.
 */
export declare abstract class ClusterBase extends Resource implements ICluster {
    /**
     * The ARN of the cluster
     */
    abstract readonly clusterArn: string;
    /**
     * The timestamp when the cluster was created, in ISO 8601 format.
     */
    abstract readonly creationTime?: string;
    /**
     * The id of the cluster.
     */
    abstract readonly clusterId: string;
    /**
     * The status of the cluster.
     */
    abstract readonly status?: string;
    /**
     * The VpcEndpointServiceName of the cluster.
     */
    abstract readonly vpcEndpointServiceName: string;
    /**
     * Optional KMS encryption key associated with this cluster.
     */
    abstract readonly encryptionKey?: kms.IKey;
    constructor(scope: Construct, id: string);
    /**
     * Grants IAM actions to the IAM Principal
     * @param grantee - The IAM principal to grant permissions to
     * @param actions - The actions to grant
     * @returns An IAM Grant object representing the granted permissions
     */
    grant(grantee: iam.IGrantable, ...actions: string[]): iam.Grant;
    /**
     * Grants connection authorization to the IAM Principal
     * @see https://docs.aws.amazon.com/aurora-dsql/latest/userguide/authentication-authorization.html#authentication-authorization-iam-policy
     * @param grantee - The IAM principal to grant permissions to
     * @default - Default grant configuration:
     * - actions: ['dsql:DbConnect'] on this.clusterArn
     * @returns An IAM Grant object representing the granted permissions
     */
    grantConnect(grantee: iam.IGrantable): iam.Grant;
    /**
     * Grants connection authorization to the IAM Principal
     * @see https://docs.aws.amazon.com/aurora-dsql/latest/userguide/authentication-authorization.html#authentication-authorization-iam-policy
     * @param grantee - The IAM principal to grant permissions to
     * @default - Default grant configuration:
     * - actions: ['dsql:DbConnectAdmin'] on this.clusterArn
     * @returns An IAM Grant object representing the granted permissions
     */
    grantConnectAdmin(grantee: iam.IGrantable): iam.Grant;
}
/**
 * Interface for multi-region cluster properties
 */
export interface MultiRegionProperties {
    /**
     * The set of peered clusters that form the multi-Region cluster configuration.
     *
     * Each peered cluster represents a database instance in a different Region.
     * @default - No peered clusters (single region cluster)
     * @required - No
     */
    readonly clusters?: ICluster[];
    /**
     * The Region that serves as the witness Region for a multi-Region cluster.
     *
     * The witness Region helps maintain cluster consistency and quorum.
     * The witness Region receives data written to any Read-Write Region
     * but does not have an endpoint.
     *
     * @required - Yes
     */
    readonly witnessRegion: string;
}
/******************************************************************************
 *                        PROPS FOR NEW CONSTRUCT
 *****************************************************************************/
/**
 * Properties for creating a Aurora DSQL cluster resource
 */
export interface ClusterCustomProps {
    /**
     * The removal policy for the cluster.
     * Only RemovalPolicy.DESTROY and RemovalPolicy.RETAIN are allowed.
     * @default - RemovalPolicy.DESTROY
     * @required - No
     */
    readonly removalPolicy?: RemovalPolicy;
    /**
     * KMS key to use for the cluster.
     * @default - A new KMS key is created.
     * @required - No
     */
    readonly kmsKey?: IKey;
    /**
     * Defines the structure for multi-Region cluster configurations, containing the witness Region and peered cluster settings.
     * If not provided, the cluster will be created in the same region as the stack (single region cluster).
     * @default - No multi-Region cluster configurations.
     * @required - No
     */
    readonly multiRegionProperties?: MultiRegionProperties;
    /**
     * Tags to apply to the cluster.
     * @default - No tags.
     * @required - No
     */
    readonly tags?: Record<string, string>;
}
/******************************************************************************
 *                      ATTRS FOR IMPORTED CONSTRUCT
 *****************************************************************************/
/**
 * Attributes for specifying an imported Aurora DSQL cluster.
 */
export interface ClusterAttributes {
    /**
     * The ARN of the cluster
     * @attribute
     */
    readonly clusterArn: string;
    /**
     * The timestamp when the cluster was created, in ISO 8601 format.
     * @default undefined - No creation time is provided
     */
    readonly creationTime?: string;
    /**
     * The status of the cluster.
     * @default undefined - No status is provided
     */
    readonly status?: string;
    /**
     * VpcEndpointServiceName of the cluster.
     * @attribute
     */
    readonly vpcEndpointServiceName: string;
    /**
     * KMS encryption key associated with this cluster.
     *
     * @default - no encryption key
     */
    readonly encryptionKey?: kms.IKey;
}
/******************************************************************************
 *                                Class
 *****************************************************************************/
/**
 * Aurora DSQL cluster resource for AWS Aurora DSQL.
 * You can use this resource to create, modify, and manage clusters.
 * @see https://docs.aws.amazon.com/aurora-dsql/latest/userguide/what-is-aurora-dsql.html
 * @resource AWS::DSQL::Cluster
 */
export declare class Cluster extends ClusterBase {
    /**
     * Static Method for importing an existing Aurora DSQL cluster.
     */
    /**
     * Creates an Aurora DSQL cluster reference from an existing cluster's attributes.
     *
     * @param scope - The construct scope
     * @param id - Identifier of the construct
     * @param attrs - Attributes of the existing cluster
     * @returns An ICluster reference to the existing cluster
     */
    static fromClusterAttributes(scope: Construct, id: string, attrs: ClusterAttributes): ICluster;
    /**
     * The ARN of the cluster
     * @attribute
     */
    readonly clusterArn: string;
    /**
     * The timestamp when the cluster was created, in ISO 8601 format.
     * @attribute
     */
    readonly creationTime?: string;
    /**
     * The id of the cluster.
     * @attribute
     */
    readonly clusterId: string;
    /**
     * The status of the cluster.
     * @attribute
     */
    readonly status?: string;
    /**
     * VpcEndpointServiceName of the cluster.
     * @attribute
     */
    readonly vpcEndpointServiceName: string;
    /**
     * KMS encryption key associated with this cluster.
     * @attribute
     */
    readonly encryptionKey?: kms.IKey;
    readonly multiRegionProperties?: MultiRegionProperties;
    /**
     * Tags applied to this cluster resource
     * A map of key-value pairs for resource tagging
     * @default - No tags applied
     */
    readonly tags?: {
        [key: string]: string;
    };
    private readonly __resource;
    constructor(scope: Construct, id: string, props: ClusterCustomProps);
    /**
     * Render the multi-region properties.
     *
     * @returns MultiRegionPropertiesProperty object in CloudFormation format, or undefined if no multi-region properties are defined
     * @default - undefined if no multi-region properties are provided
     * @internal This is an internal core function and should not be called directly.
     */
    private _renderMultiRegionProperties;
    /**
     * Validates the multi-region properties
     * @param props The multi-region properties to validate
     * @throws Error if the multi-region properties are invalid
     */
    private _validateMultiRegionProperties;
    /**
     * Validates the removal policy
     * @param removalPolicy The removal policy to validate
     * @throws Error if the removal policy is invalid
     */
    private _validateRemovalPolicy;
    /**
     * Validates the cluster tags format
     * @param tags The tags object to validate
     * @returns Array of validation error messages, empty if valid
     */
    private _validateClusterTags;
}
