"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getDocTag = getDocTag;
exports.memberFqn = memberFqn;
const reflect = require("jsii-reflect");
/**
 * Returns a documentation tag. Looks it up in inheritance hierarchy.
 * @param documentable starting point
 * @param tag the tag to search for
 */
function getDocTag(documentable, tag) {
    const t = documentable.docs.customTag(tag);
    if (t) {
        return t;
    }
    if ((documentable instanceof reflect.Property || documentable instanceof reflect.Method)) {
        const overrides = documentable.overrides;
        if (overrides?.isClassType() || overrides?.isInterfaceType()) {
            const baseMembers = overrides.allMembers.filter(m => m.name === documentable.name);
            for (const base of baseMembers) {
                const baseTag = getDocTag(base, tag);
                if (baseTag) {
                    return baseTag;
                }
            }
        }
    }
    if (documentable instanceof reflect.ClassType || documentable instanceof reflect.InterfaceType) {
        for (const base of documentable.interfaces) {
            const baseTag = getDocTag(base, tag);
            if (baseTag) {
                return baseTag;
            }
        }
    }
    if (documentable instanceof reflect.ClassType && documentable.base) {
        const baseTag = getDocTag(documentable.base, tag);
        if (baseTag) {
            return baseTag;
        }
    }
    return undefined;
}
function memberFqn(m) {
    return `${m.parentType.fqn}.${m.name}`;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInV0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFPQSw4QkFrQ0M7QUFFRCw4QkFFQztBQTdDRCx3Q0FBd0M7QUFFeEM7Ozs7R0FJRztBQUNILFNBQWdCLFNBQVMsQ0FBQyxZQUFrQyxFQUFFLEdBQVc7SUFDdkUsTUFBTSxDQUFDLEdBQUcsWUFBWSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDM0MsSUFBSSxDQUFDLEVBQUUsQ0FBQztRQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQUMsQ0FBQztJQUVwQixJQUFJLENBQUMsWUFBWSxZQUFZLE9BQU8sQ0FBQyxRQUFRLElBQUksWUFBWSxZQUFZLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDO1FBQ3pGLE1BQU0sU0FBUyxHQUFHLFlBQVksQ0FBQyxTQUFTLENBQUM7UUFDekMsSUFBSSxTQUFTLEVBQUUsV0FBVyxFQUFFLElBQUksU0FBUyxFQUFFLGVBQWUsRUFBRSxFQUFFLENBQUM7WUFDN0QsTUFBTSxXQUFXLEdBQUcsU0FBUyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNuRixLQUFLLE1BQU0sSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO2dCQUMvQixNQUFNLE9BQU8sR0FBRyxTQUFTLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO2dCQUNyQyxJQUFJLE9BQU8sRUFBRSxDQUFDO29CQUNaLE9BQU8sT0FBTyxDQUFDO2dCQUNqQixDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUM7SUFDSCxDQUFDO0lBRUQsSUFBSSxZQUFZLFlBQVksT0FBTyxDQUFDLFNBQVMsSUFBSSxZQUFZLFlBQVksT0FBTyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQy9GLEtBQUssTUFBTSxJQUFJLElBQUksWUFBWSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQzNDLE1BQU0sT0FBTyxHQUFHLFNBQVMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDckMsSUFBSSxPQUFPLEVBQUUsQ0FBQztnQkFDWixPQUFPLE9BQU8sQ0FBQztZQUNqQixDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7SUFFRCxJQUFJLFlBQVksWUFBWSxPQUFPLENBQUMsU0FBUyxJQUFJLFlBQVksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNuRSxNQUFNLE9BQU8sR0FBRyxTQUFTLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztRQUNsRCxJQUFJLE9BQU8sRUFBRSxDQUFDO1lBQ1osT0FBTyxPQUFPLENBQUM7UUFDakIsQ0FBQztJQUNILENBQUM7SUFFRCxPQUFPLFNBQVMsQ0FBQztBQUNuQixDQUFDO0FBRUQsU0FBZ0IsU0FBUyxDQUFDLENBQW9DO0lBQzVELE9BQU8sR0FBRyxDQUFDLENBQUMsVUFBVSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDekMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHJlZmxlY3QgZnJvbSAnanNpaS1yZWZsZWN0JztcblxuLyoqXG4gKiBSZXR1cm5zIGEgZG9jdW1lbnRhdGlvbiB0YWcuIExvb2tzIGl0IHVwIGluIGluaGVyaXRhbmNlIGhpZXJhcmNoeS5cbiAqIEBwYXJhbSBkb2N1bWVudGFibGUgc3RhcnRpbmcgcG9pbnRcbiAqIEBwYXJhbSB0YWcgdGhlIHRhZyB0byBzZWFyY2ggZm9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREb2NUYWcoZG9jdW1lbnRhYmxlOiByZWZsZWN0LkRvY3VtZW50YWJsZSwgdGFnOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICBjb25zdCB0ID0gZG9jdW1lbnRhYmxlLmRvY3MuY3VzdG9tVGFnKHRhZyk7XG4gIGlmICh0KSB7IHJldHVybiB0OyB9XG5cbiAgaWYgKChkb2N1bWVudGFibGUgaW5zdGFuY2VvZiByZWZsZWN0LlByb3BlcnR5IHx8IGRvY3VtZW50YWJsZSBpbnN0YW5jZW9mIHJlZmxlY3QuTWV0aG9kKSkge1xuICAgIGNvbnN0IG92ZXJyaWRlcyA9IGRvY3VtZW50YWJsZS5vdmVycmlkZXM7XG4gICAgaWYgKG92ZXJyaWRlcz8uaXNDbGFzc1R5cGUoKSB8fCBvdmVycmlkZXM/LmlzSW50ZXJmYWNlVHlwZSgpKSB7XG4gICAgICBjb25zdCBiYXNlTWVtYmVycyA9IG92ZXJyaWRlcy5hbGxNZW1iZXJzLmZpbHRlcihtID0+IG0ubmFtZSA9PT0gZG9jdW1lbnRhYmxlLm5hbWUpO1xuICAgICAgZm9yIChjb25zdCBiYXNlIG9mIGJhc2VNZW1iZXJzKSB7XG4gICAgICAgIGNvbnN0IGJhc2VUYWcgPSBnZXREb2NUYWcoYmFzZSwgdGFnKTtcbiAgICAgICAgaWYgKGJhc2VUYWcpIHtcbiAgICAgICAgICByZXR1cm4gYmFzZVRhZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChkb2N1bWVudGFibGUgaW5zdGFuY2VvZiByZWZsZWN0LkNsYXNzVHlwZSB8fCBkb2N1bWVudGFibGUgaW5zdGFuY2VvZiByZWZsZWN0LkludGVyZmFjZVR5cGUpIHtcbiAgICBmb3IgKGNvbnN0IGJhc2Ugb2YgZG9jdW1lbnRhYmxlLmludGVyZmFjZXMpIHtcbiAgICAgIGNvbnN0IGJhc2VUYWcgPSBnZXREb2NUYWcoYmFzZSwgdGFnKTtcbiAgICAgIGlmIChiYXNlVGFnKSB7XG4gICAgICAgIHJldHVybiBiYXNlVGFnO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChkb2N1bWVudGFibGUgaW5zdGFuY2VvZiByZWZsZWN0LkNsYXNzVHlwZSAmJiBkb2N1bWVudGFibGUuYmFzZSkge1xuICAgIGNvbnN0IGJhc2VUYWcgPSBnZXREb2NUYWcoZG9jdW1lbnRhYmxlLmJhc2UsIHRhZyk7XG4gICAgaWYgKGJhc2VUYWcpIHtcbiAgICAgIHJldHVybiBiYXNlVGFnO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZW1iZXJGcW4obTogcmVmbGVjdC5NZXRob2QgfCByZWZsZWN0LlByb3BlcnR5KSB7XG4gIHJldHVybiBgJHttLnBhcmVudFR5cGUuZnFufS4ke20ubmFtZX1gO1xufVxuIl19